!function(n){function e(e){for(var r,o,c=e[0],u=e[1],s=e[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(n[r]=u[r]);for(l&&l(e);d.length;)d.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var n,e=0;e<a.length;e++){for(var t=a[e],r=!0,c=1;c<t.length;c++){var u=t[c];0!==i[u]&&(r=!1)}r&&(a.splice(e--,1),n=o(o.s=t[0]))}return n}var r={},i={0:0},a=[];function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)o.d(t,r,function(e){return n[e]}.bind(null,r));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="/g.amphibian-investigation.pwa/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;a.push([102,1]),t()}({101:function(n,e,t){},102:function(n,e,t){"use strict";t.r(e);var r=t(65);Object(r.a)("./service-worker.js",{registrationOptions:{scope:"./"},ready:function(n){console.log("Service worker is active.")},registered:function(n){console.log("Service worker has been registered.")},cached:function(n){console.log("Content has been cached for offline use.")},updatefound:function(n){console.log("New content is downloading.")},updated:function(n){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(n){console.error("Error during service worker registration:",n)}});t(27),t(32),t(33);var i=t(10),a=t.n(i),o=(t(77),t(43)),c=t.n(o),u=(t(39),t(52),t(66)),s=t.n(u),l=t(1),f=t.n(l),d=t(25),p=t.n(d),h=t(13),v=t.n(h),m=t(11),b=t.n(m),g=t(26),y=t.n(g),k=t(14),w=t.n(k),_=t(15),x=t.n(_),O=t(8),j=t.n(O),A=t(67),E=t.n(A),S=t(0);function C(){var n=f()([':host {\n        display: block;\n      }\n      .hidden {\n        display: none;\n      }\n      .list-block {\n        display: grid;\n        grid-template-columns: repeat(3, .3333fr);\n        grid-gap: 10px;\n        font-size: 14px;\n      }\n\n      @media only screen and (max-width:800px) {\n        .list-block {\n          grid-template-columns: repeat(2, .5fr);\n          grid-gap: 12px\n        }\n      }\n\n      @media only screen and (max-width:540px) {\n        .list-block {\n          grid-template-columns: 1fr;\n        }\n      }\n\n      h3 {\n        margin: 10px 0;\n      }\n\n      p {\n        margin: .25em 0;\n      }\n\n      .data-card {\n        padding: 10px 15px;\n        border: 1px solid #dedede;\n        border-radius: 5px;\n        background: rgba(255,255,255, .5);\n      }\n      .card-title-groups {\n        display: grid;\n        grid-template-columns: 1fr max-content;\n        grid-template-rows: .5fr .5fr;\n        grid-template-areas: "commonname statistics" "sciencename statistics";\n      }\n      .card-title-groups > h3 {\n        grid-area: commonname;\n        margin-bottom: 0;\n      }\n      .card-title-groups > small {\n        grid-area: sciencename;\n        color: #aaa;\n        font-weight: normal;\n        font-style: italic;\n        margin-bottom: 10px;\n      }\n      .card-title-groups > div {\n        grid-area: statistics;\n      }\n      .card-title-groups .summary-groups {\n        margin-top: 12px;\n      }\n      .card-body {\n        background: #f1f1f1;\n      }\n      .card-body > p:nth-child(even) {\n        background: #e5e5e5;\n      }\n\n      .data-item {\n        border-radius: 5px;\n        padding: 0 5px;\n        margin: 2px 3px;\n        box-shadow: 0 0 1px black;\n        display: inline-block;\n        background: #f6e09f;\n      }\n\n      .summary {\n        display: flex;\n        align-items: center;\n        color: #aaa;\n        margin: 2px 0;\n      }\n      .summary svg {\n        fill: #aaa;\n        width: 1.2em;\n        height: 1.2em;\n        vertical-align: sub;\n      }\n      .summary span {\n        margin: 0 8px 0 4px;\n        line-height: 20px;\n      }\n      .summary-groups {\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .button {\n        width: 120px;\n        height: 40px;\n        background: orange;\n        color: #fff;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-decoration: none;\n        border-radius: 5px;\n      }']);return C=function(){return n},n}function R(){var n=f()(['<span class="data-item">'," "," ","</span>"]);return R=function(){return n},n}function I(){var n=f()(['<span class="data-item">'," ","</span>"]);return I=function(){return n},n}function M(){var n=f()(['<span class="data-item">',"</span>"]);return M=function(){return n},n}function H(){var n=f()(['<div class="data-card"><div class="card-title-groups"><h3>',"<br></h3><small>"," ","</small><div>",'</div></div><div class="card-body">',"</div></div>"]);return H=function(){return n},n}function D(){var n=f()(['<div class="summary-groups"><div class="summary">','</div><div class="summary">','</div></div><div class="summary">',"</div>"]);return D=function(){return n},n}function P(){var n=f()(['<div class="summary">','</div><div class="summary">',"","</div>"]);return P=function(){return n},n}function V(){var n=f()(['<span title="幼蛙"><svg viewBox="0 0 24 24"><path d="M13,2V10H21A8,8 0 0,0 13,2M19.32,15.89C20.37,14.54 21,12.84 21,11H6.44L5.5,9H2V11H4.22C4.22,11 6.11,15.07 6.34,15.42C5.24,16 4.5,17.17 4.5,18.5A3.5,3.5 0 0,0 8,22C9.76,22 11.22,20.7 11.46,19H13.54C13.78,20.7 15.24,22 17,22A3.5,3.5 0 0,0 20.5,18.5C20.5,17.46 20.04,16.53 19.32,15.89M8,20A1.5,1.5 0 0,1 6.5,18.5A1.5,1.5 0 0,1 8,17A1.5,1.5 0 0,1 9.5,18.5A1.5,1.5 0 0,1 8,20M17,20A1.5,1.5 0 0,1 15.5,18.5A1.5,1.5 0 0,1 17,17A1.5,1.5 0 0,1 18.5,18.5A1.5,1.5 0 0,1 17,20Z"/></svg> ',' </span><span title="公蛙"><svg viewBox="0 0 24 24"><path d="M9,9C10.29,9 11.5,9.41 12.47,10.11L17.58,5H13V3H21V11H19V6.41L13.89,11.5C14.59,12.5 15,13.7 15,15A6,6 0 0,1 9,21A6,6 0 0,1 3,15A6,6 0 0,1 9,9M9,11A4,4 0 0,0 5,15A4,4 0 0,0 9,19A4,4 0 0,0 13,15A4,4 0 0,0 9,11Z"/></svg> ',' </span><span title="母蛙"><svg viewBox="0 0 24 24"><path d="M12,4A6,6 0 0,1 18,10C18,12.97 15.84,15.44 13,15.92V18H15V20H13V22H11V20H9V18H11V15.92C8.16,15.44 6,12.97 6,10A6,6 0 0,1 12,4M12,6A4,4 0 0,0 8,10A4,4 0 0,0 12,14A4,4 0 0,0 16,10A4,4 0 0,0 12,6Z"/></svg> ',' </span><span title="成蛙"><svg viewBox="0 0 24 24"><path d="M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"/></svg> ',"</span>"]);return V=function(){return n},n}function B(){var n=f()(['<span style="color:#555;" title="目視數量"><svg viewBox="0 0 24 24"><path fill="#555" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/></svg> ',"</span>"]);return B=function(){return n},n}function L(){var n=f()(['<span style="color:#555;" title="聽音數量"><svg viewBox="0 0 24 24"><path fill="#555" d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"/></svg> ',"</span>"]);return L=function(){return n},n}function N(){var n=f()(['<div class="hidden"><a href="#" class="button" @click="','">複製API資料</a> <small>API資料複製：',"</small></div><p>種類總數： "," 種</p><p>紀錄筆數："," 筆</p>",'<div class="list-block">',"</div>"]);return N=function(){return n},n}function Z(){var n=f()(["",""]);return Z=function(){return n},n}function q(){var n=f()(["<p><b>"," ","</b> ","</p>"]);return q=function(){return n},n}function F(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=j()(n);if(e){var i=j()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return x()(this,t)}}var J,T,K,z,G=(T=(J=Object).getPrototypeOf||function(n){return n.__proto__},K=J.setPrototypeOf||function(n,e){return n.__proto__=e,n},z="object"===("undefined"==typeof Reflect?"undefined":a()(Reflect))?Reflect.construct:function(n,e,t){var r,i=[null];return i.push.apply(i,e),r=n.bind.apply(n,i),K(new r,t.prototype)},function(n){var e=T(n);return K(n,K((function(){return z(e,arguments,T(this).constructor)}),e))})(function(n){w()(r,n);var e,t=F(r);function r(){var n;v()(this,r);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i)),E()(y()(n),"_record",(function(e){var t=y()(n)._behaviorChip,r=p()(e,2),i=r[0],a=r[1],o=i.type,c=i.detail;return Object(S.c)(q(),o,c,a.map(t))})),n}return b()(r,[{key:"render",value:function(){var n=this,e=this.result;return Object(S.c)(Z(),e&&e.length?Object(S.c)(N(),this.outputApiData,this.copytime||"-",e.length,e.reduce((function(n,e){return n+e.records.reduce((function(n,e){return n+e[1].length}),0)}),0),this._summaryOverview(e.see,e.hear),e.map((function(e){return n._listItem(e)}))):"等待轉換")}},{key:"outputApiData",value:(e=s()(c.a.mark((function n(e){var t,r=this;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),t=[],this.result.forEach((function(n){var e=n.species,r=n.records,i={frog_id:e.id};r.forEach((function(n){var e=n[0],r=e.typeId,a=e.detailId;Object.assign(i,{habitat_id:r,habitat_p1_id:a}),n[1].forEach((function(n){var e=n.form,r=n.count,a=n.action;if("鳴"===e)r>=50?r=">50":r>=40?r="40-49":r>=30?r="30-39":r>=20?r="20-29":r>=10&&(r="10-19"),t.push(Object.assign({},i,{observing_method_id:1,amount:r,living_type_id:4,living_type_ids:4,behavior_id:2,behavior_ids:2,memo:null,_:Date.parse(new Date)}));else if("卵"===e||"蝌蚪"===e)t.push(Object.assign({},i,{observing_method_id:0,amount:"不計數",living_type_id:"卵"===e?1:2,living_type_ids:"卵"===e?1:2,behavior_id:0,behavior_ids:0,memo:null,_:Date.parse(new Date)}));else{var o=a.id;o<0&&(o=8),"幼"===e?e=3:"公"===e?e=4:"母"===e?e=5:"成"===e&&(e=8),t.push(Object.assign({},i,{observing_method_id:0,amount:r,living_type_id:e,living_type_ids:e,behavior_id:o,behavior_ids:o,memo:null,_:Date.parse(new Date)}))}}))}))})),navigator.clipboard.writeText(JSON.stringify(t)).then((function(n){r.copytime=(new Date).toLocaleString(),console.log("資料已複製!")})).catch((function(n){return console.warn("無法複製",n)}));case 4:case"end":return n.stop()}}),n,this)}))),function(n){return e.apply(this,arguments)})},{key:"_hear",value:function(n){return Object(S.c)(L(),n)}},{key:"_see",value:function(n){var e=n.froglet,t=n.male,r=n.female,i=n.grown;return Object(S.c)(B(),e+t+r+i)}},{key:"_seeDetail",value:function(n,e){var t=n.froglet,r=n.male,i=n.female,a=n.grown;return Object(S.c)(V(),t,r,i,a)}},{key:"_summaryOverview",value:function(n,e){return Object(S.c)(P(),this._hear(e),this._see(n),this._seeDetail(n))}},{key:"_summarySpecies",value:function(n,e){return Object(S.c)(D(),this._hear(e),this._see(n),this._seeDetail(n))}},{key:"_listItem",value:function(n){var e=this._record,t=n.species,r=n.records,i=n.summary,a=t.genus,o=t.species,c=t.abbr;return Object(S.c)(H(),c,a,o,this._summarySpecies(i.see,i.hear),r.map(e))}},{key:"_behaviorChip",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.form,t=n.count,r=n.action;return["卵","蝌蚪"].indexOf(e)>=0?Object(S.c)(M(),e):"鳴"===e?Object(S.c)(I(),e,t):Object(S.c)(R(),e,t,r.name)}}],[{key:"properties",get:function(){return{result:{type:Array},copytime:{type:String}}}},{key:"styles",get:function(){return Object(S.b)(C())}}]),r}(S.a));function Q(){var n=f()(['<p>簡潔代號模式，最適合用來統計手抄紀錄和熟悉代號的使用者。</p><p class="lead">蛙調紀錄文字格式</p><p><kbd>{種類}</kbd>：種類可以使用常用的中文俗名或是簡稱。</p><p><kbd>{棲地}</kbd>：使用棲地代號。</p><p><kbd>{型態}</kbd>：使用系統型態代號。</p><p><kbd>{數量}</kbd>：只使用數字表示數量，卵和蝌蚪無須計數，聽音記錄直接實際數字，不用數量區間。</p><p><kbd>{行為/聽音}</kbd>：行為代號，卵和蝌蚪的行為可不填寫。紀錄聽音時，直接使用行為代號<b> 3 </b>，若是目視鳴叫，則使用<b> 目3 </b>。</p><p>多筆紀錄可以串接，例如：<br><code class="code-block">長腳 4.8.1.9 4.8.3.2 5.22.2.9<br>面天 4.16.10.3<br>面天樹蛙 4.16.1.目3<br>小雨 4.15.2.6 5.15.2.6 4.15.2.9<br>樹蟾<br>&emsp;4.6.5.2 5.6.3.2 4.6.3.3<br>&emsp;3.13.2.9<br></code></p><p>程式會自動整理合併調查記錄。</p>']);return Q=function(){return n},n}function U(){var n=f()(['<p class="lead">蛙調紀錄文字格式</p><p><kbd>{種類}</kbd>：種類可以使用常用的中文俗名或是簡稱。</p><p><kbd>{型態/聽音}</kbd>：使用 <kbd>卵</kbd>、<kbd>蝌蚪</kbd>、<kbd>幼</kbd>、<kbd>公</kbd>、<kbd>母</kbd>、<kbd>成</kbd>，表示目視的蛙類型態；單獨使用 <kbd>鳴</kbd> 表示聽音紀錄；使用 <kbd>抱接</kbd> 可直接表示正在配對的個體，例如 <code>抱接1</code> 會轉換成公1配對和母1配對。</p><p><kbd>{數量}</kbd>：只使用數字表示數量，卵和蝌蚪無須計數，聽音記錄直接實際數字，不用數量區間。</p><p><kbd>{行為}</kbd>：直接使用行為名稱或簡寫，亦可使用系統代號#{系統代號}，目視紀錄(幼、公、母、成)的<b>9.單獨</b>行為可省略不寫。</p><p><kbd>{棲地}</kbd>：使用棲地簡稱或系統代號 @{棲地屬性id}，例如@8表示暫水岸。</p><p>多筆紀錄可以串接，例如：<br><code class="code-block">長腳 公1 公3聚 暫水岸 母2 空地<br>面天 鳴10 長草<br>面天樹蛙 公1鳴 長草<br>小雨 抱接2 公2 短草<br>樹蟾<br>&emsp;公5聚 母3聚 鳴3 水植<br>&emsp;幼2 底層<br></code></p><p>程式會自動整理合併調查記錄。</p>']);return U=function(){return n},n}function W(){var n=f()(['<div class="jumbotron py-3 m-0"><p>','</p><hr class="my-2"><p>ex: ','<br><span style="color:#aaa;">// 台北赤蛙 公蛙5隻聚集 在永水域植物</span></p><div id="furtherExplain" class="collapse"><div class="py-3 border-top">','</div></div><button class="btn btn-info" type="button" data-toggle="collapse" data-target="#furtherExplain" aria-expanded="true" aria-controls="furtherExplain">詳細說明</button></div>']);return W=function(){return n},n}function X(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=j()(n);if(e){var i=j()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return x()(this,t)}}customElements.define("investigation-list",G);var Y=function(n){var e=n.getPrototypeOf||function(n){return n.__proto__},t=n.setPrototypeOf||function(n,e){return n.__proto__=e,n},r="object"===("undefined"==typeof Reflect?"undefined":a()(Reflect))?Reflect.construct:function(n,e,r){var i,a=[null];return a.push.apply(a,e),i=n.bind.apply(n,a),t(new i,r.prototype)};return function(n){var i=e(n);return t(n,t((function(){return r(i,arguments,e(this).constructor)}),i))}}(Object)(function(n){w()(t,n);var e=X(t);function t(){return v()(this,t),e.apply(this,arguments)}return b()(t,[{key:"render",value:function(){return Object(S.c)(W(),this.renderSimpleInstructor(),this.renderSimpleExample(),this.renderFurtherInstructor())}},{key:"renderSimpleInstructor",value:function(){return"gus"===this.countingStyle?"{物種} {型態/聽音}{數量}{行為} {棲地}":"{物種} {型態}.{棲地}.{數量}.{行為/聽音}"}},{key:"renderSimpleExample",value:function(){return"gus"===this.countingStyle?"北赤 公5聚 水植":"北赤 4.6.5.2"}},{key:"renderFurtherInstructor",value:function(){return"gus"===this.countingStyle?Object(S.c)(U()):Object(S.c)(Q())}},{key:"createRenderRoot",value:function(){return this}}],[{key:"properties",get:function(){return{countingStyle:{type:String,attribute:"counting-style",reflect:!0}}}}]),t}(S.a));function nn(){var n=f()(["<p>","</p>"]);return nn=function(){return n},n}function en(){var n=f()([":host {\n        max-height: 200px;\n        overflow: auto;\n        display: block;\n      }\n      p {\n        background: #ffc107;\n        color: #555;\n        display: block;\n        padding: 2px 8px;\n        border-radius: 3px;\n      }"]);return en=function(){return n},n}function tn(){var n=f()(["",""]);return tn=function(){return n},n}function rn(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=j()(n);if(e){var i=j()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return x()(this,t)}}customElements.define("style-instructor",Y);var an=function(n){var e=n.getPrototypeOf||function(n){return n.__proto__},t=n.setPrototypeOf||function(n,e){return n.__proto__=e,n},r="object"===("undefined"==typeof Reflect?"undefined":a()(Reflect))?Reflect.construct:function(n,e,r){var i,a=[null];return a.push.apply(a,e),i=n.bind.apply(n,a),t(new i,r.prototype)};return function(n){var i=e(n);return t(n,t((function(){return r(i,arguments,e(this).constructor)}),i))}}(Object)(function(n){w()(t,n);var e=rn(t);function t(){var n;return v()(this,t),(n=e.call(this)).input=[],n}return b()(t,[{key:"render",value:function(){var n=this.input;return Object(S.c)(tn(),n.map(this._toast))}}],[{key:"properties",get:function(){return{input:{type:Array}}}},{key:"styles",get:function(){return Object(S.b)(en())}}]),b()(t,[{key:"_toast",value:function(n){return Object(S.c)(nn(),n)}}]),t}(S.a));customElements.define("warning-toast",an);t(40),t(41),t(60);var on=t(16),cn=t.n(on),un=[["Bufonidae",[["Bufo",[["bankorensis",1,["盤古蟾蜍","盤古"]]]],["Duttaphrynus",[["melanostictus",2,["黑眶蟾蜍","黑眶","黑框"]]]]]],["Dicroglossidae",[["Fejervarya",[["cancrivora",22,["海蛙"]],["limnocharis",14,["澤蛙"]]]],["Hoplobatrachus",[["rugulosus",18,["虎皮蛙","虎皮","蛤蟆"]]]],["Limnonectes",[["fujianensis",12,["福建大頭蛙","大頭","福建"]]]]]],["Hylidae",[["Hyla",[["chinensis",3,["中國樹蟾","樹蟾","中國"]]]]]],["Microhylidae",[["Kaloula",[["pulchra pulchra",8,["亞洲錦蛙","亞錦"]]]],["Microhyla",[["butleri",4,["巴氏小雨蛙","巴氏"]],["fissipes",6,["小雨蛙","小雨"]],["heymonsi",5,["黑蒙西氏小雨蛙","黑蒙"]]]],["Micryletta",[["steinegeri",7,["史丹吉氏小雨蛙","史丹","屎蛋"]]]]]],["Ranidae",[["Babina",[["adenopleura",9,["腹斑蛙","腹斑"]],["okinavana",17,["豎琴蛙","豎琴"]]]],["Hylarana",[["guentheri",11,["貢德氏赤蛙","貢德","狗蛙"]],["latoucii",13,["拉都希氏赤蛙","拉都"]],["taipehensis",21,["台北赤蛙","北赤"]]]],["Lithobates",[["catesbeianus",10,["美洲牛蛙","牛蛙","美牛"]]]],["Odorrana",[["swinhoana",20,["斯文豪氏赤蛙","斯文","鳥蛙"]]]],["Pelophylax",[["fukienensis",16,["金線蛙","金線"]]]],["Rana",[["longicrus",15,["長腳赤蛙","長腳"]],["sauteri",19,["梭德氏赤蛙","梭德"]]]]]],["Rhacophoridae",[["Buergeria",[["choui",23,["周氏樹蛙","日本","周氏"]],["otai",36,["太田樹蛙","太田"]],["robusta",24,["褐樹蛙","褐樹"]]]],["Kurixalus",[["berylliniris",34,["碧眼樹蛙","碧眼"]],["eiffingeri",25,["艾氏樹蛙","艾氏"]],["idiootocus",26,["面天樹蛙","面天"]],["wangi",35,["王氏樹蛙","王氏"]]]],["Polypedates",[["braueri",27,["布氏樹蛙","布氏"]],["megacephalus",33,["斑腿樹蛙","斑腿"]]]],["Zhangixalus",[["arvalis",28,["諸羅樹蛙","諸羅"]],["aurantiventris",29,["橙腹樹蛙","橙腹"]],["moltrechti",30,["莫氏樹蛙","莫氏"]],["prasinatus",31,["翡翠樹蛙","翡翠"]],["taipeianus",32,["台北樹蛙","北樹","台北"]]]]]]],sn=[];un.forEach((function(n){return n[1].forEach((function(n){return n[1].forEach((function(n){return sn.push.apply(sn,cn()(n[2]))}))}))}));var ln=[[1,"流動水域",[[1,1,"< 5m",["流水"]],[2,2,"> 5m",["溪流"]],[3,3,"山澗瀑布",["山澗瀑布","瀑布"]]]],[8,"永靜水域",[[28,4,"水域",["水域"]],[29,5,"岸邊",["水岸"]],[30,6,"植物",["水植"]]]],[9,"暫靜水域",[[31,7,"水域",["暫水域","暫水"]],[32,8,"岸邊",["暫水岸"]],[33,9,"植物",["暫水植"]],[44,10,"植物積水",["植水"]]]],[10,"樹木",[[34,11,"喬木",["喬木","樹林"]],[35,12,"灌木",["灌木"]],[36,13,"底層",["底層"]],[37,14,"竹子",["竹子","竹林"]]]],[6,"草地",[[16,15,"短草",["短草"]],[17,16,"高草",["高草","長草"]]]],[11,"人造區域",[[45,17,"邊坡",["邊坡"]],[38,18,"乾溝",["乾溝"]],[39,19,"建物",["建物"]],[40,20,"車道",["車道"]],[41,21,"步道",["步道"]],[42,22,"空地",["空地"]]]],[12,"其他",[[43,23,"其他",["其他"]]]]],fn=[];ln.forEach((function(n){return n[2].forEach((function(n){return fn.push.apply(fn,["@".concat(n[1])].concat(cn()(n[3])))}))}));var dn=[[0,["無"]],[1,["聚集","聚"]],[2,["鳴叫","鳴"]],[3,["築巢"]],[4,["領域"]],[5,["配對","抱接"]],[6,["打架"]],[7,["護幼"]],[8,["單獨"]],[9,["覓食"]],[10,["休息"]],[11,["屍體","屍"]],[12,["畸形蛙","畸形"]],[13,["病蛙"]]],pn=[];dn.forEach((function(n){return pn.push.apply(pn,["#".concat(n[0]+1)].concat(cn()(n[1])))}));t(98),t(99);var hn=new RegExp("(抱接|鳴|幼|公|母|成|蝌蚪|卵\\S?)(\\d+)?(\\S+)?(:\\S+)?");function vn(n,e,t){if(n&&e.length){var r=t.find((function(e){var t=e.species,r=t.genus,i=t.species,a=n.genus,o=n.species;return"".concat(r," ").concat(i)==="".concat(a," ").concat(o)}));r?mn(r.records,e):t.push({species:n,records:e})}}function mn(n,e){e.forEach((function(e){var t=n.find((function(n){return n[0].detailId===e[0].detailId}));t?bn(t[1],e[1]):n.push(e)}))}function bn(n,e){e.forEach((function(e){var t=n.find((function(n){return n.form===e.form&&n.action.id===e.action.id}));t?t.count+=e.count:n.push(e)}))}function gn(n,e){n.froglet+=e.froglet,n.male+=e.male,n.female+=e.female,n.grown+=e.grown}function yn(n){var e=n.trim().split(/\.|,/);if(e.length<1)return console.warn("empty line!"),null;var t=e.map((function(n){return(n||"").trim()})),r=p()(t,5),i=r[0],a=r[1],o=r[2],c=r[3],u=r[4];switch("蝌蚪"!==(i=["","卵","蝌蚪","幼","公","母","成","鳴"][i])&&"卵"!==i||(u=c,c=o,o=0),o=Number(o),c){case"目3":c="3";break;case"3":i="鳴";break;case void 0:c=9}var s=dn.find((function(n){return n[0]===Number(c)-1}));if(!s)return console.warn("看不懂這個行為代號"),null;var l={id:s[0],name:s[1][0]};return ln.find((function(n){return n[2].find((function(e){if(e[1]===Number(a))return a={type:n[1],typeId:n[0],detail:e[2],detailId:e[0]},!0}))})),a&&a.detailId?[a,[{form:i,count:o,action:l,note:u}]]:(console.warn("看不懂這個棲地代號"),null)}function kn(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r="",i=[];n.split(/\r?\n/).forEach((function(n,a){if(n=n.trim()){var o=0,c=0;n.split(/\s/).forEach((function(n,u){if(!n)return c+=1,void(u===o&&(o+=1));var s=sn.indexOf(n)>=0;if(u===o&&0===a&&!s)throw e.push("Should started with a species name."),new Error("Should started with a species name.");if(s){if(i.length&&(vn(r,i,t),r=null,i=[]),un.find((function(e){return e[1].find((function(t){return t[1].find((function(i){return i[2].find((function(a){if(a===n)return r={family:e[0],genus:t[0],species:i[0],abbr:i[2][0],id:i[1]},!0}))}))}))})),!r)throw e.push("".concat(a+1,":").concat(c," is an undefined species: ").concat(n,".")),new Error("".concat(a+1,":").concat(c," is an undefined species: ").concat(n,"."))}else{var l=yn(n);l?mn(i,[l]):(e.push("".concat(a+1,":").concat(c," is an undefined data: ").concat(n)),console.warn("".concat(a+1,":").concat(c," is an undefined data: ").concat(n)))}c+=n.length+1}))}else console.log("line ".concat(a+1," is an empty line."))})),i.length&&(vn(r,i,t),i=[]);var a={froglet:0,male:0,female:0,grown:0};return t.see=Object.assign({},a),t.hear=0,t.forEach((function(n){n.records.sort((function(n,e){return n[0].typeId-e[0].typeId||n[0].detailId-e[0].detailId}));var e=Object.assign({},a),r=0;n.records.forEach((function(n){n[1].forEach((function(n){var t=n.form,i=n.count;switch(t){case"幼":e.froglet+=i;break;case"公":e.male+=i;break;case"母":e.female+=i;break;case"成":e.grown+=i;break;case"鳴":r+=i}}))})),n.summary={see:e,hear:r},t.hear+=r,gn(t.see,e)})),t.sort((function(n,e){var t=n.species,r=e.species;return"".concat(t.family," ").concat(t.genus," ").concat(t.species).localeCompare("".concat(r.family," ").concat(r.genus," ").concat(r.species))}))}function wn(n,e){var t=[],r="",i=[],a=[];n.split(/\r?\n/).forEach((function(n,o){if(n=n.trim()){var c=0,u=0;n.split(/\s/).forEach((function(n,s){if(!n)return u+=1,void(s===c&&(c+=1));var l=sn.indexOf(n)>=0;if(s===c&&0===o&&!l)throw e.push("Should started with a species name."),new Error("Should started with a species name.");if(l){if(i.length&&(vn(r,i,t),r=null,i=[],a=[]),un.find((function(e){return e[1].find((function(t){return t[1].find((function(i){return i[2].find((function(a){if(a===n)return r={family:e[0],genus:t[0],species:i[0],abbr:i[2][0],id:i[1]},!0}))}))}))})),!r)throw e.push("".concat(o+1,":").concat(u," is an undefined species: ").concat(n,".")),new Error("".concat(o+1,":").concat(u," is an undefined species: ").concat(n,"."))}else if(fn.indexOf(n)>=0){var f;if("@"===n[0]){var d=Number(n.substring(1));ln.find((function(n){return n[2].find((function(e){if(e[1]===d)return f={type:n[1],typeId:n[0],detail:e[2],detailId:e[0]},!0}))}))}else ln.find((function(e){return e[2].find((function(t){return t[3].find((function(r){if(r===n)return f={type:e[1],typeId:e[0],detail:t[2],detailId:t[0]},!0}))}))}));if(!f)throw e.push("".concat(o+1,":").concat(u," is an undefined habitat: ").concat(n,".")),new Error("".concat(o+1,":").concat(u," is an undefined habitat: ").concat(n,"."));mn(i,[[f,a]]),a=[]}else{var p=function(n){var e=n.match(hn);if(!e)return console.warn("看不懂："+n),null;if("蝌蚪"===e[1]||"卵"===e[1][0])return[{form:e[1]}];var t=Number(e[2]);if("抱接"===e[1])return[{form:"公",count:t,action:{id:5,name:"配對"}},{form:"母",count:t,action:{id:5,name:"配對"}}];var r=e[3];if(r){var i;if("#"===r[0]){var a=Number(r.substring(1))-1;i=dn.find((function(n){return n[0]===a}))}else i=dn.find((function(n){return n[1].find((function(n){return n===r}))}));if(!i)return console.warn("找不到行為"),null;r={id:i[0],name:i[1][0]}}else r={id:8,name:"單獨"};return[{form:e[1],count:t,action:r}]}(n);p?bn(a,p):(e.push("".concat(o+1,":").concat(u," is an undefined data: ").concat(n)),console.warn("".concat(o+1,":").concat(u," is an undefined data: ").concat(n)))}u+=n.length+1}))}else console.log("line ".concat(o+1," is an empty line."))})),i.length&&(vn(r,i,t),i=[],a=[]);var o={froglet:0,male:0,female:0,grown:0};return t.see=Object.assign({},o),t.hear=0,t.forEach((function(n){n.records.sort((function(n,e){return n[0].typeId-e[0].typeId||n[0].detailId-e[0].detailId}));var e=Object.assign({},o),r=0;n.records.forEach((function(n){n[1].forEach((function(n){var t=n.form,i=n.count;switch(t){case"幼":e.froglet+=i;break;case"公":e.male+=i;break;case"母":e.female+=i;break;case"成":e.grown+=i;break;case"鳴":r+=i}}))})),n.summary={see:e,hear:r},t.hear+=r,gn(t.see,e)})),console.log(t),t.sort((function(n,e){var t=n.species,r=e.species;return"".concat(t.family," ").concat(t.genus," ").concat(t.species).localeCompare("".concat(r.family," ").concat(r.genus," ").concat(r.species))}))}t(101),$((function(){var n=document.getElementById("raw-text"),e=document.querySelector("investigation-list"),t=document.querySelector("style-instructor"),r="sandi";document.querySelectorAll('input[name="counting-style"]').forEach((function(n){return n.addEventListener("change",(function(n){r=n.target.value,t.countingStyle=r}),!1)})),document.getElementById("btn-translate").addEventListener("click",(function(t){t.preventDefault();var i=[],a="sandi"===r?kn:wn;try{e.result=a((n.value||"").trim(),i),console.log(e.result)}catch(t){console.warn(t),e.result=[]}finally{$("warning-toast")[0].input=i,i=[],$("investigation-list")[0].copytime=""}}),!1)}))}});